[tox]
envlist =
    pylint, docs, runslow, doctest
isolated_build = true

[testenv]
description = Running {envname} with {basepython}
passenv = HOME

basepython = python3.7

setenv =
    PIP_DISABLE_VERSION_CHECK = 1
    PYTHONPATH = {toxinidir}

whitelist_externals = poetry
skip_install = true
commands =
    poetry install -vvv

    doctest: poetry run pytest -v --basetemp={envtmpdir} --junitxml=junit/.test.{envname}.xml [] --doctest-modules
    runslow: poetry run pytest -v --runslow --basetemp={envtmpdir} --junitxml=junit/.test.{envname}.xml []
    docs: poetry run sphinx-build -W docs docs/_build/html
    pylint: poetry run pytest --pylint --pylint-jobs=1
